<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>OBSESSION</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@300;400;600;900&family=Cinzel:wght@400;600;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style_protected.css">
<script>
function _d(e){try{return CryptoJS.AES.decrypt(e,'OBS3SS10N_mlplsk20').toString(CryptoJS.enc.Utf8)}catch(t){return''}}
</script>
</head>
<body>
    <!-- 自定义提示框 -->
    <div id="customAlert" class="custom-alert">
        <div class="custom-alert-content">
            <div class="custom-alert-message" id="alertMessage"></div>
            <button class="custom-alert-button" onclick="Alert.close()">确定</button>
        </div>
    </div>

    <!-- 自定义确认框 -->
    <div id="customConfirm" class="custom-alert">
        <div class="custom-alert-content">
            <div class="custom-alert-message" id="confirmMessage"></div>
            <div class="confirm-buttons">
                <button class="confirm-button-cancel" onclick="Confirm.cancel()">取消</button>
                <button class="confirm-button-ok" onclick="Confirm.ok()">确定</button>
            </div>
        </div>
    </div>
    
    <!-- 提示词编辑弹窗 -->
    <div id="promptEditModal" class="prompt-edit-modal">
        <div class="prompt-edit-overlay" onclick="MemorySettings.closePromptEdit()"></div>
        <div class="prompt-edit-content">
            <div class="prompt-edit-header">
                <h3 id="promptEditTitle" class="prompt-edit-title">编辑提示词</h3>
                <button class="side-panel-close" onclick="MemorySettings.closePromptEdit()">✕</button>
            </div>
            <div class="prompt-edit-body">
                <textarea id="promptEditTextarea" class="prompt-edit-textarea" placeholder="请输入提示词..."></textarea>
            </div>
            <div class="prompt-edit-footer">
                <button class="confirm-button-cancel" onclick="MemorySettings.closePromptEdit()">取消</button>
                <button class="confirm-button-ok" onclick="MemorySettings.savePromptEdit()">保存</button>
            </div>
        </div>
    </div>

    <!-- 左上角锐利装饰元素 -->
    <div class="corner-accent"></div>
    
    <!-- 装饰元素 -->
    <div class="decorations">
        <div class="corner corner-tl"></div>
        <div class="corner corner-tr"></div>
        <div class="corner corner-bl"></div>
        <div class="corner corner-br"></div>
    </div>

    <!-- 主容器 -->
    <div class="container">
        <div class="title-section">
            <h1 class="title-main">OBSESSION</h1>
            <p class="title-sub">世界万千，一念所向</p>
            <div class="accent-line">
                <div class="accent-dot"></div>
            </div>
        </div>

        <div class="actions">
            <button class="btn btn-primary" id="newCharacter">
                <span class="btn-text">
                    <span class="btn-text__cn">新建角色</span>
                    <span class="btn-text__en">New Character</span>
                </span>
                <span class="btn-icon">→</span>
            </button>

            <button class="btn btn-secondary" id="importCharacter">
                <span class="btn-text">
                    <span class="btn-text__cn">导入角色</span>
                    <span class="btn-text__en">Import Character</span>
                </span>
                <span class="btn-icon">↑</span>
            </button>
        </div>
    </div>

    <div class="footer-hint">- Local Storage -</div>

    <!-- 系统绑定引导页内容 -->
    <div id="bindingSection" class="hidden-section">
        <!-- 左侧竖线 - 独立固定 -->
        <div class="vertical-line"></div>
        
        <!-- 滚动容器 -->
        <div class="scroll-container">
            <div class="content-wrapper">
                <div class="system-beep">叮——</div>
                
                <div class="dialogue-text">
                    <p class="dialogue-paragraph" id="line1"></p>
                    <p class="dialogue-paragraph" id="line2"></p>
                    <p class="dialogue-paragraph" id="line3"></p>
                    <p class="dialogue-paragraph" id="line4"></p>
                    <p class="dialogue-paragraph" id="line5"></p>
                    <p class="dialogue-paragraph" id="line6"></p>
                    <p class="dialogue-paragraph" id="line7"></p>
                    <p class="dialogue-paragraph" id="line8"></p>
                </div>

                <button class="continue-btn" id="continueBtn">
                    <span class="continue-btn-text">进入配置 →</span>
                </button>
            </div>
        </div>
    </div>

    <!-- API配置页面 -->
    <div id="apiConfigSection">
        <div class="config-container">
            <h1 class="config-title">系统配置</h1>
            
            <!-- API配置表单（可移动到设置面板） -->
            <div id="api-config-form">
                <!-- 对话模型配置 -->
                <div class="model-config-block">
                    <h4 class="block-title">对话模型</h4>
                
                <div class="form-group">
                    <label class="form-label">服务商</label>
                    <div class="custom-select-wrapper">
                        <div class="custom-select" data-select="cfg-provider">
                            <span class="custom-select-value">自定义</span>
                            <svg class="custom-select-arrow" viewBox="0 0 12 8" fill="none">
                                <path d="M1 1L6 6L11 1" stroke="#d4879c" stroke-width="2"/>
                            </svg>
                        </div>
                        <div class="custom-select-dropdown">
                            <div class="custom-select-option selected" data-value="custom">自定义</div>
                            <div class="custom-select-option" data-value="openai">OpenAI</div>
                            <div class="custom-select-option" data-value="openrouter">Open Router</div>
                            <div class="custom-select-option" data-value="gemini">Google AI Studio</div>
                            <div class="custom-select-option" data-value="deepseek">DeepSeek</div>
                            <div class="custom-select-option" data-value="siliconflow">SiliconFlow</div>
                        </div>
                    </div>
                    <!-- 隐藏的原生select，用于保存值 -->
                    <select class="form-select" id="cfg-provider" onchange="Settings.onProviderChange('chat')" style="display: none;">
                        <option value="custom">自定义</option>
                        <option value="openai">OpenAI</option>
                        <option value="openrouter">Open Router</option>
                        <option value="gemini">Google AI Studio</option>
                        <option value="deepseek">DeepSeek</option>
                        <option value="siliconflow">SiliconFlow</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">接口地址</label>
                    <input type="text" class="form-input" id="cfg-url" name="api-chat-url" placeholder="https://api.example.com/v1" oninput="Settings.autoSave()" onchange="Settings.autoSave()">
                </div>
                
                <div class="form-group">
                    <label class="form-label">密钥</label>
                    <input type="password" class="form-input" id="cfg-key" name="api-chat-key" placeholder="sk-..." oninput="Settings.autoSave()" onchange="Settings.autoSave()">
                </div>
                
                <div class="form-group">
                    <label class="form-label">模型名称</label>
                    <div class="button-group">
                        <div class="model-input-flex">
                            <input type="text" class="form-input" id="cfg-model" name="api-chat-model" placeholder="gpt-4" oninput="Settings.filterModels('chat'); Settings.autoSave();" onchange="Settings.autoSave()">
                            <div class="model-list" id="model-list-chat"></div>
                        </div>
                        <button class="btn-scan" id="btn-scan-chat" onclick="Settings.fetchModels('chat')">扫描</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <button class="btn-test-api" id="btn-test-chat" onclick="Settings.testAPI('chat')">测试连接</button>
                </div>
            </div>
            
            <!-- 记忆模型配置 -->
            <div class="model-config-block">
                <h4 class="block-title">记忆模型</h4>
                
                <label class="checkbox-group">
                    <input type="checkbox" checked id="cfg-func-same" onchange="Settings.toggleFuncExtra()">
                    <span class="checkbox-label">使用相同配置</span>
                </label>
                
                <div id="func-extra" class="func-extra-hidden">
                    <div class="form-group">
                        <label class="form-label">服务商</label>
                        <div class="custom-select-wrapper">
                            <div class="custom-select" data-select="cfg-func-provider">
                                <span class="custom-select-value">自定义</span>
                                <svg class="custom-select-arrow" viewBox="0 0 12 8" fill="none">
                                    <path d="M1 1L6 6L11 1" stroke="#d4879c" stroke-width="2"/>
                                </svg>
                            </div>
                            <div class="custom-select-dropdown">
                                <div class="custom-select-option selected" data-value="custom">自定义</div>
                                <div class="custom-select-option" data-value="openai">OpenAI</div>
                                <div class="custom-select-option" data-value="openrouter">Open Router</div>
                                <div class="custom-select-option" data-value="gemini">Google AI Studio</div>
                                <div class="custom-select-option" data-value="deepseek">DeepSeek</div>
                                <div class="custom-select-option" data-value="siliconflow">SiliconFlow</div>
                            </div>
                        </div>
                        <!-- 隐藏的原生select，用于保存值 -->
                        <select class="form-select" id="cfg-func-provider" onchange="Settings.onProviderChange('func')" style="display: none;">
                            <option value="custom">自定义</option>
                            <option value="openai">OpenAI</option>
                            <option value="openrouter">Open Router</option>
                            <option value="gemini">Google AI Studio</option>
                            <option value="deepseek">DeepSeek</option>
                            <option value="siliconflow">SiliconFlow</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">接口地址</label>
                        <input type="text" class="form-input" id="cfg-func-url" name="api-func-url" placeholder="https://api.example.com/v1" oninput="Settings.autoSave()" onchange="Settings.autoSave()">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">密钥</label>
                        <input type="password" class="form-input" id="cfg-func-key" name="api-func-key" placeholder="sk-..." oninput="Settings.autoSave()" onchange="Settings.autoSave()">
                    </div>
                </div>
                
                <!-- 模型名称字段始终显示，不受"使用相同配置"影响 -->
                <div class="form-group">
                    <label class="form-label">模型名称</label>
                    <div class="button-group">
                        <div class="model-input-flex">
                            <input type="text" class="form-input" id="cfg-func-model" name="api-func-model" placeholder="gpt-3.5-turbo" oninput="Settings.filterModels('func'); Settings.autoSave();" onchange="Settings.autoSave()">
                            <div class="model-list" id="model-list-func"></div>
                        </div>
                        <button class="btn-scan" id="btn-scan-func" onclick="Settings.fetchModels('func')">扫描</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <button class="btn-test-api" id="btn-test-func" onclick="Settings.testAPI('func')">测试连接</button>
                </div>
                </div>
            </div>
            
            <button class="btn-save-config" id="btnSaveConfig" onclick="Settings.handleSaveConfig()">保存配置</button>
        </div>
    </div>


    <!-- 角色信息引导页面 -->
    <div id="characterIntroSection" class="hidden-section">
        <div class="vertical-line"></div>
        <div class="scroll-container">
            <div class="content-wrapper">
                <div class="system-beep">叮——</div>
                <div class="dialogue-text">
                    <p class="dialogue-paragraph" id="char-line1"></p>
                    <p class="dialogue-paragraph" id="char-line2"></p>
                    <p class="dialogue-paragraph" id="char-line3"></p>
                </div>
                <button class="continue-btn" id="continueBtnChar">继续 →</button>
            </div>
        </div>
    </div>
    
    <!-- 角色设定页面 -->
    <div id="characterSetupSection">
        <div class="character-container">
            <h1 class="config-title">角色设定</h1>
            
            <!-- 角色表单（标签页版本） -->
            <div id="character-form">
                <div class="character-tabs-wrapper">
                    <!-- 标签页导航 -->
                    <div class="character-tabs-nav">
                        <button class="character-tab active" data-tab="basic" onclick="CharacterForm.switchTab('basic')">
                            <span class="character-tab-text">基本</span>
                        </button>
                        <button class="character-tab" data-tab="background" onclick="CharacterForm.switchTab('background'); WorldPreference.init();">
                            <span class="character-tab-text">偏好</span>
                        </button>
                    </div>
                    
                    <!-- 标签页内容 -->
                    <div class="character-tabs-content">
                        <!-- 基本信息 -->
                        <div class="character-tab-panel active" data-panel="basic">
                            <div class="character-field">
                                <label class="character-field-label">姓名</label>
                                <input type="text" class="character-input-compact" id="char-name" name="character-name" placeholder="输入你的姓名" oninput="CharacterManager.autoSave()">
                            </div>
                            <div class="character-field">
                                <label class="character-field-label">性别</label>
                                <div class="character-gender-inline">
                                    <label>
                                        <input type="radio" name="gender" value="female" checked onchange="CharacterManager.autoSave()">
                                        <span>女</span>
                                    </label>
                                </div>
                            </div>
                            <div class="character-field">
                                <label class="character-field-label">外貌特征</label>
                                <textarea class="character-textarea-compact character-textarea-short" id="char-appearance" name="character-appearance" placeholder="例如：绝色容貌，凤眸含媚，冷艳高贵..." oninput="CharacterManager.autoSave()"></textarea>
                            </div>
                            <div class="character-field">
                                <label class="character-field-label">性格倾向</label>
                                <textarea class="character-textarea-compact character-textarea-short" id="char-personality" name="character-personality" placeholder="例如：温柔善良但内心坚强，外表冷静实则感性..." oninput="CharacterManager.autoSave()"></textarea>
                            </div>
                        </div>
                        
                        <!-- 偏好 -->
                        <div class="character-tab-panel" data-panel="background">
                            <div class="character-field">
                                <!-- 控制栏 -->
                                <div class="world-controls">
                                    <div class="world-controls-hint">选中 = 屏蔽</div>
                                    <div class="world-control-buttons">
                                        <button class="world-control-btn" onclick="WorldPreference.selectAll()">全选</button>
                                        <button class="world-control-btn" onclick="WorldPreference.clear()">清除</button>
                                    </div>
                                </div>
                                
                                <!-- 标签容器 -->
                                <div class="world-tags-container" id="worldTagsContainer">
                                    <!-- 标签将由JavaScript生成 -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <button class="btn-start-journey" id="btnStartJourney" onclick="Character.startJourney()">确认</button>
        </div>
    </div>

    <!-- 导入角色弹窗 -->
    <div id="importModal" class="import-modal">
        <div class="import-modal-content">
            <h2 class="import-modal-title">导入角色</h2>
            <p class="import-modal-subtitle">请粘贴角色数据</p>
            
            <textarea class="import-textarea" id="importTextarea" placeholder="将角色数据代码粘贴到这里..."></textarea>
            
            <div class="import-modal-buttons">
                <button class="btn-import-cancel" onclick="ImportModal.close()">取消</button>
                <button class="btn-import-confirm" onclick="ImportModal.confirm()">确认导入 →</button>
            </div>
        </div>
    </div>

    <!-- 重新配置API模态框 -->

    <!-- 游戏主界面 -->
    <div id="gameSection" class="game-section-hidden">
        <!-- 顶部栏 -->
        <div class="game-header">
            <div class="game-title">OBSESSION</div>
            <div class="game-header-buttons">
                <button class="header-btn" onclick="GameUI.openPanel('settings')">
                    <span class="header-btn-text">设置</span>
                </button>
                <button class="header-btn" onclick="GameUI.openPanel('memory')">
                    <span class="header-btn-text">记忆</span>
                </button>
                <button class="header-btn" onclick="GameUI.openPanel('saves')">
                    <span class="header-btn-text">存档</span>
                </button>
            </div>
        </div>

        <!-- 聊天区域 -->
        <div class="chat-container">
            <div class="chat-messages" id="chatMessages">
                <!-- 消息将动态添加到这里 -->
            </div>
        </div>

        <div class="input-container">
            <div class="input-wrapper">
                <textarea class="chat-input" id="chatInput" placeholder="输入你的行动..." rows="1"></textarea>
                <button class="send-btn" id="sendBtn" onclick="GameUI.sendMessage()">
                    <span class="send-btn-text">SEND</span>
                </button>
            </div>
        </div>
        <!-- 设置面板 -->
        <div class="side-panel" id="settingsPanel">
            <div class="side-panel-overlay" onclick="GameUI.closePanel('settings')"></div>
            <div class="side-panel-content">
                <div class="side-panel-header">
                    <h2 class="side-panel-title">设置</h2>
                    <button class="side-panel-close" onclick="GameUI.closePanel('settings')">✕</button>
                </div>
                <div class="side-panel-body">

                    <!-- 角色管理 -->
                    <div class="settings-section">
                        <h3 class="settings-section-title">角色设定</h3>
                        <div id="character-form-slot"></div>
                    </div>
                    
                    <!-- 支持与反馈 -->
                    <div class="settings-section">
                        <h3 class="settings-section-title">📮 反馈建议</h3>
                        
                        <div class="feedback-container">
                            <textarea 
                                id="feedbackContent" 
                                class="feedback-textarea"
                                placeholder="告诉我你的想法、建议、遇到的问题...&#10;&#10;我会认真看每一条反馈！"
                            ></textarea>
                            
                            <input 
                                type="text" 
                                id="feedbackContact" 
                                class="feedback-contact"
                                placeholder="留下联系方式（可选）"
                            >
                            
                            <button class="feedback-submit-btn" onclick="Support.sendFeedback()">
                                发送反馈
                            </button>
                            
                            <p class="feedback-hint">
                                反馈会直接发送到我这里，我会尽快回复~
                            </p>
                        </div>
                    </div>

                    
                    <!-- API配置（从apiConfigSection移动过来） -->
                    <div class="settings-section">
                        <h3 class="settings-section-title">API配置</h3>
                        <div id="api-config-slot"></div>
                    </div>
                    
                    <!-- 记忆总结配置 -->
                    <div class="settings-section">
                        <h3 class="settings-section-title">记忆总结</h3>
                        
                        <!-- 开启自动总结 -->
                        <div class="memory-settings-container">
                            <label class="memory-settings-label">
                                <input type="checkbox" id="cfg-memory-auto" onchange="MemorySettings.save()" class="memory-settings-checkbox">
                                <span class="memory-settings-text">开启长期记忆自动总结</span>
                            </label>
                            <p class="memory-settings-hint">短期记忆每轮对话都会生成，长期记忆根据间隔定期生成</p>
                        </div>

                        <!-- 总结间隔设置 -->
                        <div class="memory-prompt-section">
                            <div class="memory-interval-grid">
                                <div>
                                    <label class="memory-interval-label">
                                        自动总结间隔（轮）
                                    </label>
                                    <input type="number" id="cfg-memory-interval" min="1" max="100" value="10" oninput="MemorySettings.save()" class="memory-interval-input">
                                </div>
                            </div>
                            <p class="memory-prompt-hint">
                                每N轮对话后自动生成长期总结
                            </p>
                        </div>                      
                        
                        <!-- 短期记忆总结 -->
                        <div class="memory-prompt-section" style="display:none;">
                            <div class="memory-prompt-header">
                                <label class="memory-prompt-label">短期记忆总结提示词</label>
                                <div class="memory-prompt-buttons">
                                    <button class="icon-btn" onclick="MemorySettings.expandPrompt('short')" title="展开编辑">
                                        <span class="memory-prompt-icon">⛶</span>
                                    </button>
                                    <button class="icon-btn" onclick="MemorySettings.resetShortPrompt()" title="重置为默认提示词">
                                        <span class="memory-prompt-icon">↻</span>
                                    </button>
                                </div>
                            </div>
                            <textarea id="cfg-memory-short-prompt" readonly onclick="MemorySettings.expandPrompt('short')" class="qyjb"></textarea>
                            <p class="memory-prompt-hint">
                                每轮对话后自动生成总结，提取关键信息
                            </p>
                        </div>
                        
                        <!-- 长期记忆总结 -->
                        <div class="memory-prompt-section" style="display: none;">
                            <div class="memory-prompt-header">
                                <label class="memory-prompt-label">长期记忆总结提示词</label>
                                <div class="memory-prompt-buttons">
                                    <button class="icon-btn" onclick="MemorySettings.expandPrompt('long')" title="展开编辑">
                                        <span class="memory-prompt-icon">⛶</span>
                                    </button>
                                    <button class="icon-btn" onclick="MemorySettings.resetLongPrompt()" title="重置为默认提示词">
                                        <span class="memory-prompt-icon">↻</span>
                                    </button>
                                </div>
                            </div>
                            <textarea id="cfg-memory-long-prompt" readonly onclick="MemorySettings.expandPrompt('long')" class="qyjb"></textarea>
                            <p class="memory-prompt-hint">
                                定期汇总多轮对话，形成完整记忆
                            </p>
                        </div>
                        
                     </div>

                    <!-- 数据管理 -->
                    <div class="settings-section">
                        <h3 class="settings-section-title">数据管理</h3>
                        <div class="data-manage-buttons">
                            <button class="data-manage-btn" onclick="DataManager.exportCharacter()">
                                导出角色
                            </button>
                            <button class="data-manage-btn" onclick="DataManager.importCharacter()">
                                导入角色
                            </button>
                        </div>
                        <p class="data-manage-hint">导出包含角色、世界、对话、记忆、存档等所有数据</p>
                    </div>

                    <!-- 关于 -->
                    <div class="settings-section">
                        <h3 class="settings-section-title">关于</h3>
                        
                        <div class="about-container">
                            <div class="about-logo">
                                <h2 class="about-title">OBSESSION</h2>
                            </div>
                            
                            <div class="about-info">
                                <div class="about-item">
                                    <span class="about-label">版本</span>
                                    <span class="about-value">v1.0.0</span>
                                </div>
                                <div class="about-item">
                                    <span class="about-label">开发者</span>
                                    <span class="about-value">C.0</span>
                                </div>
                                <div class="about-item">
                                    <span class="about-label">小红书</span>
                                    <span class="about-value">@C.0</span>
                                </div>
                            </div>
                                                        
                            <div class="about-actions">
                                <button class="about-btn" onclick="About.showTerms()">
                                    用户协议
                                </button>
                                <button class="about-btn" onclick="About.showPrivacy()">
                                    隐私说明
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 记忆面板 -->
        <div class="side-panel" id="memoryPanel">
            <div class="side-panel-overlay" onclick="GameUI.closePanel('memory')"></div>
            <div class="side-panel-content">
                <div class="side-panel-header">
                    <h2 class="side-panel-title">记忆</h2>
                    <button class="side-panel-close" onclick="GameUI.closePanel('memory')">✕</button>
                </div>
                <div class="side-panel-body">
                    <div class="memory-section">
                        <h3 class="memory-section-title">短期记忆
                        <button class="memory-action-btn" id="btn-manual-long-term" onclick="MemoryManager.manualGenerateLongTerm()">
                            <span>总结</span>
                        </button>
                        </h3>
                        <div class="memory-list" id="shortTermMemory">
                            <p class="memory-empty">暂无短期记忆</p>
                        </div>
                    </div>
                    <div class="memory-section">
                        <h3 class="memory-section-title">长期记忆</h3>
                        <div class="memory-list" id="longTermMemory">
                            <p class="memory-empty">暂无长期记忆</p>
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>

        <!-- 存档面板 -->
        <div class="side-panel" id="savesPanel">
            <div class="side-panel-overlay" onclick="GameUI.closePanel('saves')"></div>
            <div class="side-panel-content">
                <div class="side-panel-header">
                    <h2 class="side-panel-title">存档</h2>
                    <button class="side-panel-close" onclick="GameUI.closePanel('saves')">✕</button>
                </div>
                <div class="side-panel-body">
                    <div class="save-slots" id="saveSlots">
                        <!-- 存档槽将动态生成 -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 右键菜单 -->
        <div class="context-menu" id="contextMenu">
            <!-- 菜单项将动态生成 -->
        </div>
    </div>

<!-- 用户协议弹窗 -->
        <div id="termsModal" class="terms-modal">
            <div class="terms-overlay"></div>
            <div class="terms-content">
                <div class="terms-header">
                    <h2 class="terms-title">欢迎使用 OBSESSION</h2>
                    <button class="side-panel-close" onclick="About.closeTerms()" id="termsCloseBtn" style="display: none;">✕</button>
                </div>
                <div class="terms-body" id="termsBody">
                    <p class="intro-text">
                        在使用前，请仔细阅读以下使用协议和隐私说明。<br>
                        <strong style="color: var(--blood-red);">滚动阅读到底部即可关闭，继续使用即表示您同意本协议。</strong>
                    </p>

                    <div class="terms-section">
                        <h3>1. 产品说明</h3>
                        <p>OBSESSION 是一款基于快穿世界观的AI互动叙事工具，供个人娱乐使用。</p>
                        <ul>
                            <li>本工具不提供AI服务，需用户自行配置API密钥</li>
                            <li>所有数据存储在用户本地浏览器中</li>
                            <li>开发者不收集、不存储、不上传任何用户数据</li>
                        </ul>
                    </div>

                    <div class="terms-section">
                        <h3>2. 用户责任</h3>
                        <p>使用本工具即表示您同意：</p>
                        <ul>
                            <li>您对使用本工具生成的所有内容承担全部责任</li>
                            <li>您不会将本工具用于任何违法、侵权或不当用途</li>
                            <li>您理解AI生成的内容可能存在偏差、错误或不适宜的情况</li>
                            <li>您使用的API密钥及产生的费用由您自行负责</li>
                        </ul>
                    </div>

                    <div class="terms-section">
                        <h3>3. 隐私保护</h3>
                        <p>OBSESSION 高度重视您的隐私：</p>
                        <ul class="check-list">
                            <li>✓ 所有角色、对话、记忆数据存储在您的浏览器本地</li>
                            <li>✓ 不收集任何个人信息或使用行为</li>
                            <li>✓ 不使用第三方数据分析工具</li>
                            <li>✓ 您的API密钥直接从浏览器发送到AI服务商</li>
                        </ul>
                        <p class="warning">⚠️ 请注意：清除浏览器数据会导致本地数据丢失，请及时导出备份</p>
                    </div>

                    <div class="terms-section">
                        <h3>4. 免责声明</h3>
                        <ul>
                            <li>本工具仍在持续开发中，可能存在功能不完善或偶发错误</li>
                            <li>开发者会尽力优化，但不对使用过程中的任何问题承担责任</li>
                            <li>开发者不对因使用本工具导致的任何损失承担责任</li>
                            <li>开发者保留随时修改、暂停或终止服务的权利</li>
                        </ul>
                    </div>

                    <div class="terms-section">
                        <h3>5. 知识产权</h3>
                        <ul>
                            <li>本产品的代码、UI设计、世界观设定、提示词框架等归开发者所有</li>
                            <li>允许个人学习研究，禁止商业使用和二次分发</li>
                            <li>禁止删除版权标识后传播或用于其他项目</li>
                            <li>用户生成的内容版权归用户本人</li>
                        </ul>
                    </div>

                    <div class="terms-section">
                        <h3>6. 其他</h3>
                        <p>如有疑问或建议，欢迎通过产品内反馈功能联系开发者。</p>
                    </div>

                    <div class="terms-footer">
                        <p>开发者：C.0</p>
                        <p>小红书：@C.0</p>
                        <p>最后更新：2026年2月</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 隐私说明弹窗 -->
        <div id="privacyModal" class="terms-modal">
            <div class="terms-overlay" onclick="About.closePrivacy()"></div>
            <div class="terms-content">
                <div class="terms-header">
                    <h2 class="terms-title">隐私说明</h2>
                    <button class="side-panel-close" onclick="About.closePrivacy()">✕</button>
                </div>
                <div class="terms-body">
                    <p class="intro-text">OBSESSION 采用完全本地化的设计理念，最大程度保护您的隐私。</p>

                    <div class="terms-section">
                        <h3>我们做的</h3>
                        <ul class="check-list">
                            <li>✓ <strong>本地存储</strong> - 所有数据存储在您的浏览器本地，不经过任何服务器</li>
                            <li>✓ <strong>零追踪</strong> - 不使用任何数据分析、用户追踪或统计工具</li>
                            <li>✓ <strong>零收集</strong> - 不收集您的个人信息、使用习惯或生成内容</li>
                            <li>✓ <strong>开放透明</strong> - 代码逻辑公开透明，可随时审查</li>
                        </ul>
                    </div>

                    <div class="terms-section">
                        <h3>我们不做的</h3>
                        <ul class="cross-list">
                            <li>✗ 不在服务器存储任何用户数据</li>
                            <li>✗ 不使用Cookie进行用户追踪</li>
                            <li>✗ 不与任何第三方共享您的信息</li>
                            <li>✗ 不访问或上传您的对话内容</li>
                        </ul>
                    </div>

                    <div class="terms-section">
                        <h3>数据流向</h3>
                        <ol>
                            <li><strong>API密钥</strong> - 您配置的密钥仅存储在本地浏览器，发送API请求时直接从您的浏览器发往对应的AI服务商</li>
                            <li><strong>对话内容</strong> - 您与AI的对话内容仅在您的浏览器和AI服务商之间传输，本工具不作任何中转或存储</li>
                            <li><strong>角色数据</strong> - 所有角色设定、记忆、存档等数据均存储在浏览器的localStorage中</li>
                        </ol>
                    </div>

                    <div class="terms-section">
                        <h3>您的权利</h3>
                        <ul>
                            <li>您可以随时通过浏览器设置清除所有本地数据</li>
                            <li>您可以使用导出功能备份数据到本地文件</li>
                            <li>您对自己生成的所有内容拥有完整控制权</li>
                        </ul>
                    </div>

                    <div class="terms-section">
                        <h3>重要提醒</h3>
                        <p class="warning">⚠️ 清除浏览器数据、缓存或使用隐私模式会导致本地数据丢失</p>
                        <p class="warning">⚠️ 定期使用"导出角色"功能备份重要数据</p>
                        <p class="warning">⚠️ 切换浏览器或设备需要手动导入数据</p>
                    </div>

                    <div class="terms-footer">
                        <p><strong>您的数据，完全属于您。</strong></p>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script src="script_protected.js"></script>
<script>
const _sp='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';
document.getElementById('cfg-memory-short-prompt').value=_d(_sp);</script>
<script>const _lp='U2FsdGVkX19Wg02vGy9t0qvM4Hxtcgp1BLaAeuAw+W1WCggTv8h1e3JRtNh0WxTd6UQA0ex+7++j17ShsmLKz0xWpjqOwGmZ/g+UFO4kPWMMWdaUcFDxF/Z5xcmEsI0FOWCbiqYU4IVsUZVm5D+YOLrXRFmj93SZQJbvq9StegDZ1hqKGMotbvcNKPnap/M1EnFZkwFdvoWIZaVSg/Ku8KF15hOA6FUnL8KNKkxx2Lm+RV21wB8d2+Y6cuYVd1FVksHf2Ga5/k7x1LPxOofs4DYu7mmhqVxgxT6khdaHe2g81SYQEQYXOv8uvEdm0+fYhlRVP8jFCnE4r2Lq4wA2ATS/+MGUFoqQprs9oBJLrwjRB9P0fxgKSt//OlNQyA5eDgpCGlt9Ad4wL2plhEKvvy3SRcLba7ZtMlwJ+/St/j7znEziqfiVCprjqnxH9VWKmo1yJqPuaHse1EE0GMUs434l6TUKoBnELVge4W30f5fEk2R3/Hc48pcvs0fmXQCkpZ9y148yVk0e3GCXGTdoTkhmp9LxuZTz5EfIeFI1lNrO8ZZ7Akj/yoGrwOIJaMd2E1ZoZOrS+uMu6tsJ1Dc6X4M4Jn0MbNx7eWlcE7RZCZECyjximwwL77UOhQjjYUykf0TZEjXDH9jiZgwAtd7fAUqc2ajvXjqqjYZUgMilNi0nJAFFuZ/o2NQQmRU5Hyi/bVS9YPPKrUXONYqw77Ej0SPywy9uZToLY43G3VFhhAL10ixXTtZ6zIY7rgve5T+NZZkQLPzPbKl4NJ4uRTx4DF5G7zEWpbDWE3SuzzNw9vNDnlPpqdaznlMaDZYcQIe5vvf8glAtLam0Me+pf2PfSzZ9SvKlWObKA+HrrmeVl+7wH2yzWhV5mjriznNnUEIOE9PHlkQqqlrTwDXWrDBDLqaZQfsS/tnEpsAXLEIil9XydknGnqPqsaCUHarEBQOQ5tY+QfMsT6LIKB8JaAm76kJfwXBEQEfO4hHLEcPmODqdFmaIa9sxKVviz135k/hSN01eLVhIahdKjma6GK45pzg50YNhEsSZzwAcM3FBaIZ+lWn/f5BPD0eB5/riAZbpkrfBydOwTm4ezI6fHr5gIY7GOocdd8PxnzVzU5bwdcS5xLPWQXhOJm+lzFwyKbrGJ8gOMHdYCFT5wxa/ndsOY7G7Zdqmsfh7HsCS6OpFjieyLomNWWlMhH6Dqd8HPVyAKBDfRpoPbp73/GHdrDBXqXO1SrHvQ9vMZ51a6rT4683o0Sfb957qqCC7DoltCLIktwHh6XGYcZlN/NPasYLgRQkJz92vE8AM7WYSnVtXatesrp6SXydbQWU6cRH1hFCiUOMYIhxp3CwTd6OBnOJXWwR5QVqBg5y6lP9lNnkPeCTF7iCYwbPqoArYhsRLX33i7Jk1mt1GxHLezTGMZwJ0SwDooZLSt9+b//uuT3Dld8RcojlPLKP4/TaxK3EavweBunts1R9qXKDg0cUlP3+VY9z//pk8/z2qpb9Qyw6gXaHmBU66AEhWI3r5kjTswk/0';
document.getElementById('cfg-memory-long-prompt').value=_d(_lp);</script>
</body>
</html>